"use strict";(()=>{var A=Object.create;var K=Object.defineProperty;var D=Object.getOwnPropertyDescriptor;var U=Object.getOwnPropertyNames;var $=Object.getPrototypeOf,N=Object.prototype.hasOwnProperty;var S=(t,e)=>()=>(e||t((e={exports:{}}).exports,e),e.exports);var V=(t,e,r,i)=>{if(e&&typeof e=="object"||typeof e=="function")for(let n of U(e))!N.call(t,n)&&n!==r&&K(t,n,{get:()=>e[n],enumerable:!(i=D(e,n))||i.enumerable});return t};var B=(t,e,r)=>(r=t!=null?A($(t)):{},V(e||!t||!t.__esModule?K(r,"default",{value:t,enumerable:!0}):r,t));var W=S(g=>{"use strict";Object.defineProperty(g,"__esModule",{value:!0});g.Observable=void 0;var k=t=>!!Symbol[t],E=t=>k(t)?Symbol[t]:"@@"+t,Z=E("iterator"),x=E("observable"),M=E("species");function y(t,e){let r=t[e];if(r!=null){if(typeof r!="function")throw new TypeError(r+" is not a function");return r}}function b(t){let e=t.constructor;return e!==void 0&&(e=e[M],e===null&&(e=void 0)),e!==void 0?e:f}function F(t){return t instanceof f}function p(t){p.log?p.log(t):setTimeout(()=>{throw t})}function h(t){Promise.resolve().then(()=>{try{t()}catch(e){p(e)}})}function L(t){let e=t._cleanup;if(e!==void 0&&(t._cleanup=void 0,!!e))try{if(typeof e=="function")e();else{let r=y(e,"unsubscribe");r&&r.call(e)}}catch(r){p(r)}}function _(t){t._observer=void 0,t._queue=void 0,t._state="closed"}function G(t){let e=t._queue;if(e){t._queue=void 0,t._state="ready";for(let r=0;r<e.length&&(R(t,e[r].type,e[r].value),t._state!=="closed");++r);}}function R(t,e,r){t._state="running";let i=t._observer;try{let n=y(i,e);switch(e){case"next":n&&n.call(i,r);break;case"error":if(_(t),n)n.call(i,r);else throw r;break;case"complete":_(t),n&&n.call(i);break}}catch(n){p(n)}t._state==="closed"?L(t):t._state==="running"&&(t._state="ready")}function v(t,e,r){if(t._state!=="closed"){if(t._state==="buffering"){t._queue.push({type:e,value:r});return}if(t._state!=="ready"){t._state="buffering",t._queue=[{type:e,value:r}],h(()=>G(t));return}R(t,e,r)}}var O=class{constructor(e,r){this._cleanup=void 0,this._observer=e,this._queue=void 0,this._state="initializing";let i=this,n={get closed(){return i._state==="closed"},next(o){v(i,"next",o)},error(o){v(i,"error",o)},complete(){v(i,"complete")}};try{this._cleanup=r.call(void 0,n)}catch(o){n.error(o)}this._state==="initializing"&&(this._state="ready")}get closed(){return this._state==="closed"}unsubscribe(){this._state!=="closed"&&(_(this),L(this))}},f=class{constructor(e){if(!(this instanceof f))throw new TypeError("Observable cannot be called as a function");if(typeof e!="function")throw new TypeError("Observable initializer must be a function");this._subscriber=e}subscribe(e){return(typeof e!="object"||e===null)&&(e={next:e,error:arguments[1],complete:arguments[2]}),new O(e,this._subscriber)}forEach(e){return new Promise((r,i)=>{if(typeof e!="function"){i(new TypeError(e+" is not a function"));return}function n(){o.unsubscribe(),r()}let o=this.subscribe({next(c){try{e(c,n)}catch(s){i(s),o.unsubscribe()}},error:i,complete:r})})}map(e){if(typeof e!="function")throw new TypeError(e+" is not a function");let r=b(this);return new r(i=>this.subscribe({next(n){try{n=e(n)}catch(o){return i.error(o)}i.next(n)},error(n){i.error(n)},complete(){i.complete()}}))}filter(e){if(typeof e!="function")throw new TypeError(e+" is not a function");let r=b(this);return new r(i=>this.subscribe({next(n){try{if(!e(n))return}catch(o){return i.error(o)}i.next(n)},error(n){i.error(n)},complete(){i.complete()}}))}reduce(e){if(typeof e!="function")throw new TypeError(e+" is not a function");let r=b(this),i=arguments.length>1,n=!1,c=arguments[1];return new r(s=>this.subscribe({next(a){let u=!n;if(n=!0,!u||i)try{c=e(c,a)}catch(j){return s.error(j)}else c=a},error(a){s.error(a)},complete(){if(!n&&!i)return s.error(new TypeError("Cannot reduce an empty sequence"));s.next(c),s.complete()}}))}async all(){let e=[];return await this.forEach(r=>e.push(r)),e}concat(...e){let r=b(this);return new r(i=>{let n,o=0;function c(s){n=s.subscribe({next(a){i.next(a)},error(a){i.error(a)},complete(){o===e.length?(n=void 0,i.complete()):c(r.from(e[o++]))}})}return c(this),()=>{n&&(n.unsubscribe(),n=void 0)}})}flatMap(e){if(typeof e!="function")throw new TypeError(e+" is not a function");let r=b(this);return new r(i=>{let n=[],o=this.subscribe({next(s){if(e)try{s=e(s)}catch(u){return i.error(u)}let a=r.from(s).subscribe({next(u){i.next(u)},error(u){i.error(u)},complete(){let u=n.indexOf(a);u>=0&&n.splice(u,1),c()}});n.push(a)},error(s){i.error(s)},complete(){c()}});function c(){o.closed&&n.length===0&&i.complete()}return()=>{n.forEach(s=>s.unsubscribe()),o.unsubscribe()}})}[x](){return this}static from(e){let r=typeof this=="function"?this:f;if(e==null)throw new TypeError(e+" is not an object");let i=y(e,x);if(i){let n=i.call(e);if(Object(n)!==n)throw new TypeError(n+" is not an object");return F(n)&&n.constructor===r?n:new r(o=>n.subscribe(o))}if(k("iterator")&&(i=y(e,Z),i))return new r(n=>{h(()=>{if(!n.closed){for(let o of i.call(e))if(n.next(o),n.closed)return;n.complete()}})});if(Array.isArray(e))return new r(n=>{h(()=>{if(!n.closed){for(let o=0;o<e.length;++o)if(n.next(e[o]),n.closed)return;n.complete()}})});throw new TypeError(e+" is not observable")}static of(...e){let r=typeof this=="function"?this:f;return new r(i=>{h(()=>{if(!i.closed){for(let n=0;n<e.length;++n)if(i.next(e[n]),i.closed)return;i.complete()}})})}static get[M](){return this}};g.Observable=f;Object.defineProperty(f,Symbol("extensions"),{value:{symbol:x,hostReportError:p},configurable:!0})});var q=S((oe,C)=>{C.exports=W().Observable});var I=B(q());var w=class{#e={};filter(e){let r=this.toStringKey(e);return Object.entries(this.#e).filter(([i])=>i.startsWith(r)).map(([i,n])=>n)}find(e){let r=this.filter(e);return r.length?r[0]:void 0}add(e,r){let i=this.toStringKey(e);this.#e={...this.#e,[i]:r}}remove(e){let r=this.toStringKey(e);this.#e=Object.entries(this.#e).reduce((i,[n,o])=>n.startsWith(r)?i:{...i,[n]:o},{})}any(e){let r=this.toStringKey(e);return!!this.filter(e).length}toStringKey(e){let r="";return e.id&&(r=e.id.toString()),e.name&&(r=`${e.name}_${r}`),e.target&&(r=`${e.target}_${r}`),r}};function T(){return window.crypto.getRandomValues(new Uint16Array(1))[0]}var H=window.chrome,P=H;var J=P.webview,m=J;var l=new w;m.addEventListener("message",Q);function Q(t){let e=t.data;e&&("id"in e?X(e):Y(e))}function X(t){let e={id:t.id},r=l.find(e);r&&(t.error?r.error(new Error(t.body)):(r.next(t.body),r.complete()),l.remove(e))}function Y(t){let e={name:t.name,target:t.target};l.filter(e).forEach(i=>{i.next(t.body)})}var ee=(t,e,r)=>new Promise((i,n)=>{new I.default(o=>{let c=T(),s={id:c};l.add(s,o);let a={name:t,id:c,body:e,target:r};m.postMessage(a)}).subscribe(i,n)}),te=(t,e)=>new I.default(r=>{let i={name:t,target:e};l.any(i)||m.postMessage({name:"lantern.event.listen",target:e,body:{event:t}});let n={id:T(),name:t,target:e};return l.add(n,r),()=>{r.complete(),l.remove(n),l.any(i)||m.postMessage({name:"lantern.event.unlisten",target:e,body:{event:t}})}}),re=(t,e)=>{let r={name:t,target:e};l.any(r)&&(m.postMessage({name:"lantern.event.unlisten",target:e,body:{event:t}}),l.filter(r).forEach(i=>{i.complete()}),l.remove(r))},d={invoke:ee,listen:te,unlisten:re};document.addEventListener("mousedown",async t=>{t.buttons===1&&t.target instanceof Element&&t.target.hasAttribute("lantern-drag-region")&&(t.preventDefault(),t.stopImmediatePropagation(),t.detail===2?await d.invoke("lantern.window.isMaximized")?await d.invoke("lantern.window.restore"):await d.invoke("lantern.window.maximize"):await d.invoke("lantern.window.startDragMove"))});var z={ipc:d};window.lantern=z;})();
